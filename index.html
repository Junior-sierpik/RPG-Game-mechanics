<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <title>Symulacja RPG</title>
</head>
<body>
  <h1>Symulacja walk RPG</h1>
  <button onclick="runSimulation()">Start Symulacji</button>
  <pre id="output"></pre>

  <script type="module">
    import { generateCharacter } from './generator.js';
    import { simulateTournament } from './battle.js';
    import { printResults } from './results.js';

    window.runSimulation = function() {
      const NUM_CHARACTERS = 20;
      const FIGHTS_PER_PAIR = 100;
      const characters = [];

      for (let i = 1; i <= NUM_CHARACTERS; i++) {
        characters.push(generateCharacter(i));
      }

      simulateTournament(characters, FIGHTS_PER_PAIR);

      const sorted = characters.slice().sort((a, b) => b.wins - a.wins);
      const output = sorted.map(char => {
        const winRate = ((char.wins / (FIGHTS_PER_PAIR * (NUM_CHARACTERS - 1))) * 100).toFixed(2);
        return `${char.name}: ${char.wins} zwyciÄ™stw (${winRate}%)`;
      }).join('\n');

      document.getElementById("output").textContent = output;
    }
  </script>
</body>
</html>
